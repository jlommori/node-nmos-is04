<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Resource.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Resource.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>
// Describes the resource_base on which all other resources are built

var uuid = require('uuid');
// var immutable = require('seamless-immutable');
var Capabilities = require('./Capabilities.js')
// var Transports = require('./Transports.js');
// var Formats = require('./Formats.js');
// var DeviceTypes = require('./DeviceTypes.js');
// var os = require('os')

function nanoSeconds(hrtime) {
  return hrtime[0] * 1e9 + hrtime[1];
}

var loadHRTime = nanoSeconds(process.hrtime());
var loadDate = Date.now();

/**
 * Instantiate a resource. Resources are not generally created directly, but via child classes (Node, Device, etc)
 * @param {object} params       Object containing all Resource parameters
 * @param {string} [params.id]          Globally unique UUID identifier for the Node.
 * @param {string} [params.version]     String formatted PTP timestamp.
 *                          (&amp;lt;&lt;em>seconds&lt;/em>&amp;gt;:&amp;lt;&lt;em>nanoseconds&lt;/em>&amp;gt;)
 *                          indicating precisely when an attribute of the resource
 *                          last changed.
 * @param {string} [params.label]       Freeform string label for the Node.
 * @param {string} [params.desc] Detailed description of the resource
 * @param {Object} [params.caps]     [Capabilities]{@link capabilities} (not yet defined).
 * @param {string[]} [params.tags]        Key value set of freeform string tags to aid in filtering resources. Values should be represented as an array of strings. Can be empty.
 */
class Resource {
  constructor(params) {
    this.id = this.constructor.generateID(params.id),
    this.version = this.constructor.generateVersion(params.version)
    this.label = this.constructor.generateLabel(params.label)
    this.description = this.constructor.generateDescription(params.desc)
    this.caps = this.constructor.generateCaps(params.caps)
    this.tags = this.constructor.generateTags(params.tags)
  }

  /**
   * generate UUID id for the resource
   * @param  {string} [id]  Globally unique UUID identifier for the Node.
   * @return {string}       Globally unique UUID identifier for the Node.
   */
  static generateID(id) {
    if (arguments.length === 0 || id === null || id === undefined)
      return uuid.v4();
    else return id;
  }

  /**
   * generate Version for the resource
   * @param  {string} [version] String formatted PTP timestamp.
   *                          (&amp;lt;&lt;em>seconds&lt;/em>&amp;gt;:&amp;lt;&lt;em>nanoseconds&lt;/em>&amp;gt;)
   *                          indicating precisely when an attribute of the resource
   *                          last changed.
   * @return {string}         String formatted PTP timestamp.
   *                          (&amp;lt;&lt;em>seconds&lt;/em>&amp;gt;:&amp;lt;&lt;em>nanoseconds&lt;/em>&amp;gt;)
   *                          indicating precisely when an attribute of the resource
   *                          last changed.
   */
  static generateVersion(version) {
    if (arguments.length === 0 || version === null || version === undefined) {
      var currentNanos = nanoSeconds(process.hrtime());
      var difference = currentNanos - loadHRTime;
      var microDate = loadDate + Math.floor(difference / 1e6);
      return Math.floor(microDate / 1e3) + ":" + (difference % 1e9);
    }
    else return version;
  }

  /**
   * generate label for the resource
   * @param  {string} [label] Freeform string label for the Node.
   * @return {string}       Freeform string label for the Node.
   */
  static generateLabel(label) {
    if (arguments.length === 0 || label === null || label === undefined)
      return '';
    else return label;
  }

  /**
   * generate description for the resource
   * @param  {string} [desc] Detailed description of the resource
   * @return {string}      Detailed description of the resource
   */
  static generateDescription(desc) {
    if (arguments.length === 0 || desc === null || desc === undefined)
      return '';
    else return desc;
  }

  /**
   * generate Capabilities for the resource (not yet implemented)
   * @param  {Object} [caps] [Capabilities]{@link capabilities} (not yet defined).
   * @return {Object}      [Capabilities]{@link capabilities} (not yet defined).
   */
  static generateCaps(caps) {
    if (arguments.length === 0 || caps === null || caps === undefined)
      return Capabilities;
    else return caps;
  }

  /**
   * generate Tags for the resource
   * @param  {string[]} [tags] Key value set of freeform string tags to aid in filtering resources. Values should be represented as an array of strings. Can be empty.
   * @return {string[]}      Key value set of freeform string tags to aid in filtering resources. Values should be represented as an array of strings. Can be empty.
   */
  static generateTags(tags) {
    if (arguments.length === 0 || tags === null || tags === undefined)
      return [];
    else return tags;
  }

  //TODO: Add validation against JSON Schema from NMOS
  valid() {
    return true
  }
}

module.exports = Resource;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Node.html">Node</a></li><li><a href="Resource.html">Resource</a></li></ul><h3>Global</h3><ul><li><a href="global.html#capabilities">capabilities</a></li><li><a href="global.html#deviceTypes">deviceTypes</a></li><li><a href="global.html#formats">formats</a></li><li><a href="global.html#generateID">generateID</a></li><li><a href="global.html#generateLabel">generateLabel</a></li><li><a href="global.html#generateVersion">generateVersion</a></li><li><a href="global.html#transports">transports</a></li><li><a href="global.html#valid">valid</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Mon Sep 02 2019 09:40:32 GMT-0400 (Eastern Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
